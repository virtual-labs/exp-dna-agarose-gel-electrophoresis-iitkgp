<!--
Lab name: Experimental Biochemistry
Exp name: DNA analysis by agarose gel electrophoresis
File name: index.html
Developer: Prakriti Dhang
-->



<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="./css/main.css">

</head>

<body>
	<div class="container-fluid p-2 mt-2 ">
		<div class="row">
			<!-- <div class="col-md-2 mb-2 " style="text-align: center;">
				<div class="d-grid  d-flex flex-row d-flex justify-content-md-center gap-2">
				<button class="btn btn-primary" type="button" id="start" onclick="start()">Start</button>
			</div> -->
			<!-- <div class="col-md-2 mb-2 " style="text-align: center;">
				<button class="btn btn-primary" type="button" id="gelprep" onclick="gel_prep()" disabled>Gel
					Preparation</button>
			</div>
			<div class="col-md-2 mb-2 " style="text-align: center;">
				<button class="btn btn-primary" type="button" id="sampleprep" disabled onclick="sample_prep()">Sample
					Preparation</button>
			</div>
			<div class="col-md-2 mb-2 " style="text-align: center;">
				<button class="btn btn-primary" type="button" id="samplerun" disabled onclick="sample_run()">Sample
					Loading and
					Running of Gel </button>
			</div>
			<div class="col-md-4  " style="text-align: center;">
				<button class="btn btn-primary" type="button" id="viewsample" disabled
					onclick="view_sample_UVlight()">Visualization
					of the DNA under UV light</button>

				

			</div> -->
		</div>


		<div class="row ">
			<div class="col-md-5">
				<div class="card">
					<div class="card-header fs-5 fw-bold">
						Instructions

					</div>

					<div class="card-body">
						<ol id="inst1">
							<li>Click on "Click to Start" button to start the experiment.
							</li>

							<li> Select correct components for preparing gel in the casting tray and click on "Gel
								Preparation" button. </li>
							<li>Next, click on the gel that is being solidified in the casting
								tray. This will place in
								the electrophoresis chamber.</li>

							<li> Now, click on "Sample preparation" button after selecting the components.
							</li>
							<li> Next Click buffer from "Sample Loading" dropdown button, then click on "Buffer" image.
								Buffer will submerge the gel.
							</li>
							<li>Now, Click on the dropdown and select "Load Sample A". Click on the peptite A and drag
								the peptite near the sample A to load in the gel. Repeat for sample B, C, and D.</li>
							<li> Click on "Running of Gel" button. Next connect the negative wire of electrophorersis
								chamber to negative of voltage meter and
								positive wire of electrophorersis chamber to positive wire of voltage meter.

							</li>
							<li> Now click on "V" and "+" sign to set the voltage. Range is 50 V to 100 V.</li>
							<li> Click on the run icon button to run the gel. The sample will move from negative to
								positive side. It will stop once it reaches the positive end.</li>
							<li> Click on the gel to move the gel in the UV
								light. Next Click on "Visualization
								of the DNA under UV light" to turn on UV light</li>

						</ol>
					</div>
				</div>

			</div>
			<!--/div>

		<div class="row "-->
			<div class="col-md-7">
				<div class="card">


					<div class="card-body">
						<!-- <div class="col-md-6 mb-2 "> -->
						<!--div class="d-grid  d-flex flex-row d-flex justify-content-md-center gap-2"-->
						<button class="btn btn-success " type="button" id="start" data-bs-toggle="modal"
							data-bs-target="#exampleModal">Click to
							Start the Experiment</button>
						<button class="btn btn-warning " style="float:right;" type="button" id="start" data-bs-toggle="modal"
							data-bs-target="#exampleModal" onclick="restartexp()">
							Re-Do the Experiment</button>
						<!-- </div> -->
					</div>
				</div>
				<div class="card">
					<!-- <div class="card-header fs-5 fw-bold">
						Input Panel for Gel Preparation
					</div>
 -->
					<div class="card-body p-3">
						<h6> Select components for gel preparation:</h6>
						<div class="form-check form-check-inline ">
							<input class="form-check-input " type="checkbox" name="gelprep" value="Agarose powder"
								id="g1">
							<label class="form-check-label" for="g1">
								Agarose powder
							</label>
						</div>
						<div class="form-check form-check-inline">
							<input class="form-check-input " type="checkbox" name="gelprep" value="TAE/TBE Buffer"
								id="g2">
							<label class="form-check-label" for="g2">
								TAE/TBE Buffer

							</label>
						</div>
						<div class="form-check form-check-inline">
							<input class="form-check-input " type="checkbox" name="gelprep"
								value="Ethidium Bromide (EtBr)" id="g3">
							<label class="form-check-label" for="g3">
								Ethidium Bromide (EtBr)
							</label>
						</div>
						<div class="form-check form-check-inline">
							<input class="form-check-input " type="checkbox" name="gelprep" value="Distilled water"
								id="g4">
							<label class="form-check-label" for="g4">
								Distilled water

							</label>
						</div>
						<div class="form-check form-check-inline">
							<input class="form-check-input " type="checkbox" name="gelprep" value="β-galactosidase"
								id="g5">
							<label class="form-check-label" for="g5">
								β-galactosidase

							</label>
						</div>
						<div class="form-check form-check-inline">
							<input class="form-check-input " type="checkbox" name="gelprep" value="Gelatin powder"
								id="g6">
							<label class="form-check-label" for="g6">
								Gelatin powder

							</label>
						</div>
					</div>
					<div class="col-md-2 mb-2 p-2">

						<button class="btn btn-primary " type="button" id="gelprep" onclick="gel_prep()" disabled>Gel
							Preparation</button>
					</div>
				</div>

				<div class="card">
					<!-- <div class="card-header fs-5 fw-bold">
						Input Panel for Sample Preparation
					</div> -->

					<div class="card-body p-3">
						<h6> Select the components for sample B, C and D.</h6>
						<div class="form-check form-check-inline">
							<input class="form-check-input" type="checkbox" name="sampleprep" value="DNA" id="s1">
							<label class="form-check-label" for="s1">
								DNA
							</label>
						</div>
						<div class="form-check form-check-inline">
							<input class="form-check-input" type="checkbox" name="sampleprep"
								value="Dye containing bromophenol blue" id="s2">
							<label class="form-check-label" for="s2">
								Dye containing bromophenol blue
							</label>
						</div>

						<div class="form-check form-check-inline">
							<input class="form-check-input" type="checkbox" name="sampleprep" value="Ethidum bromide"
								id="s4">
							<label class="form-check-label" for="s4">
								Ethidum bromide


							</label>
						</div>
						<div class="form-check form-check-inline">
							<input class="form-check-input" type="checkbox" name="sampleprep" value="Aniline blue dye"
								id="s5">
							<label class="form-check-label" for="s5">
								Aniline blue dye

							</label>
						</div>



					</div>
					<h6 class="p-2"> Note: DNA ladder is in Sample A. </h6>
					<div class="col-md-3 mb-2 p-2">
						<button class="btn btn-primary" type="button" id="sampleprep" onclick="sample_prep()"
							disabled>Sample
							Preparation</button>
					</div>
				</div>
				<div class="card">


					<div class="card-body">
<!-- 
						<div class="col-md-6 mb-2 "> -->
							<!-- <button class="btn btn-primary" type="button" id="sampleload" disabled
								onclick="sample_load()">Sample Loading
							</button> -->

							<div class="dropdown div-inline">
								<button class="btn btn-primary dropdown-toggle" id="sampleload" type="button"
									data-bs-toggle="dropdown" disabled>
									Sample Loading
								</button>
								<ul class="dropdown-menu">
									<li><a class="dropdown-item" onclick="sample_load()">Buffer</a></li>
									<li><a class="dropdown-item" id="loadsamplea" onclick="sample_loadA()">Load Sample A
										</a></li>
									<li><a class="dropdown-item" id="loadsampleb" onclick="sample_loadB()">Load Sample B
										</a></li>
									<li><a class="dropdown-item" id="loadsamplec" onclick="sample_loadC()">Load Sample C
										</a></li>
									<li><a class="dropdown-item" id="loadsampled" onclick="sample_loadD()">Load Sample D
										</a></li>
								</ul>
							</div>
					<!--  </div> --> 
						<!-- <div class="col-md-3 mb-2 "> -->
							<button class="btn btn-primary" type="button" id="gelrun" disabled
								onclick="run_gel()">Setting up Electrophoresis </button>
					<!-- 	</div> -->
						<!-- <div class="col-md-5  "> -->
							<button class="btn btn-primary" type="button" id="viewsample" 
								onclick="view_sample_UVlight()" disabled>Visualization
								of the DNA under UV light</button>


						<!-- </div> -->





					</div>
				</div>
			</div>
		</div>




		<div class="row ">
			<div class="col-md-12">
				<div class="card card-body border border-0">
					<!-- <div class="card-header fs-5 fw-bold">
						Experimental Setup
					</div>
					<div class=""> -->
					<div class="img-container">
						<img src="./images/agel-making-case.png" id="agelcase" class="image-fluid">
						<!-- Agarose gel case-->
						<img src="./images/agarose gel.png" id="agel" class="image-fluid" onclick="moveImage()"
							style="cursor: pointer; display: none;"> <!--draggable="true" ondragstart="drag(event)"-->
						<!-- Agarose gel -->

						<img src="./images/tubesabcd.png" id="tube" class="image-fluid" style=" display: none;">
						<!-- Samples-->
						<!-- <img src="./images/tubemeter.png" id="tubemeter" class="image-fluid " style="display: none;">
 -->
						<img src="./images/peptitea.png" id="peptitea" class="image-fluid " style="display: none;">
						<img src="./images/peptiteb.png" id="peptiteb" class="image-fluid " style="display: none;">

						<img src="./images/peptitec.png" id="peptitec" class="image-fluid " style="display: none;">

						<img src="./images/peptited.png" id="peptited" class="image-fluid " style="display: none;">



						<!-- peptite-->
						<img src="./images/buffer.png" id="buffer" class="image-fluid "
							style="cursor: pointer; display:none;" onclick="addbuffer()"> <!-- buffer-->
						<!-- <canvas id="buffertext" style="border:1px solid #a1a0a0;"></canvas> -->
						<img src="./images/voltagetimer.png" id="voltage" class="image-fluid"> <!-- voltage timer -->


						<img src="./images/case.png" id="case" class="image-fluid"> <!-- case -->
						<canvas id="myCanvas1" width="21" height="18" style="border:0px solid #535252;"></canvas>
						<!--ondrop="drop(event)" ondragover="allowDrop(event)"-->

						<img src="./images/agarosegel1.png" id="agel1" class="image-fluid" onclick="moveImage1()"
							style="cursor: pointer; display:none;"> <!-- Agarose gel -->

						<!-- <img src="./images/negvedot.png" id="negativedot" class="image-fluid"> 
						<img src="./images/posdot.png" id="positivedot" class="image-fluid"> 

						<img src="./images/negvedot.png" id="vnegativedot" class="image-fluid"> 
						<img src="./images/posdot.png" id="vpositivedot" class="image-fluid">  -->


						<img src="./images/sideviewcase.png" id="sideviewcase" class="image-fluid"> <!-- sideviewcase-->

						<img src="./images/uv-machine.png" id="uvmachine" class="image-fluid "> <!-- uv machine -->

						<canvas id="myCanvas2" width="21" height="21" style="border:0px solid #535252;"
							ondragover="allowDrop(event)" ondrop="drop(event)"></canvas>

						<canvas id="myCanvasuv1" width="21" height="21" style="border:0px solid #535252;"></canvas>
						<canvas id="myCanvasuv2" width="21" height="21" style="border:0px solid #535252;"></canvas>

						<canvas id="myCanvass1" style="border:0px solid #535252;"></canvas>
						<canvas id="myCanvass2" style="border:0px solid #535252;"></canvas>
						<canvas id="myCanvass3" style="border:0px solid #535252;"></canvas>
						<canvas id="myCanvass4" style="border:0px solid #535252;"></canvas>

						<canvas id="myCanvass1A" style="border:0px solid #535252;"></canvas>
						<canvas id="myCanvass2B" style="border:0px solid #535252;"></canvas>
						<canvas id="myCanvass3C" style="border:0px solid #535252;"></canvas>
						<canvas id="myCanvass4D" style="border:0px solid #535252;"></canvas>

						<canvas id="myCanvasv1" style="border:0px solid #535252;" onclick="voltclick()"></canvas>
						<canvas id="myCanvast1" style="border:0px solid #535252;" onclick="timerclick()"></canvas>
						<canvas id="myCanvasvp" style="border:0px solid #535252;" onclick="voltinc()"></canvas>
						<canvas id="myCanvasvn" style="border:0px solid #535252;" onclick="voltdec()"></canvas>
						<canvas id="myCanvasrn" style="border:0px solid #535252;" onclick="runninggel()"></canvas>


						<div id="ld1"></div> <!-- negitive side in case-->
						<div id="ld2"></div> <!-- positive side in casse-->
						<div id="ld3"></div> <!-- negitive side in voltmeter-->
						<div id="ld4"></div> <!-- positive side in voltmeter-->
						<div id="ld5"></div> <!-- negitive side in voltmeter-->
						<div id="ld6"></div> <!-- positive side in voltmeter-->

						<div id="ld7"></div> <!-- negitive side in voltmeter-->
						<div id="ld8"></div> <!-- positive side in voltmeter-->
						<div id="ld9"></div> <!-- negitive side in voltmeter-->
						<div id="ld10"></div> <!-- positive side in voltmeter-->

						<canvas id="textvoltimer" style="border:0px solid #535252;"></canvas>
						<canvas id="sideviewcasetext" style="border:1px solid #535252;">400</canvas>

						<canvas id="sampledrop1" style="border:1px solid #a1a0a0;"></canvas>
						<img src="./images/samplea.png" id="samplea" class="image-fluid">

						<canvas id="sampledrop2" style="border:1px solid #a1a0a0;"></canvas>
						<img src="./images/sampleb.png" id="sampleb" class="image-fluid">
						<canvas id="sampledrop3" style="border:1px solid #a1a0a0;"></canvas>
						<img src="./images/samplec.png" id="samplec" class="image-fluid">
						<canvas id="sampledrop4" style="border:1px solid #a1a0a0;"></canvas>
						<img src="./images/sampled.png" id="sampled" class="image-fluid">

						<!-- <canvas id="sample1" style="border:0px solid #a1a0a0;"></canvas>
						<canvas id="sample2" style="border:0px solid #a1a0a0;"></canvas>
						<canvas id="sample3" style="border:0px solid #a1a0a0;"></canvas>
						<canvas id="sample4" style="border:0px solid #a1a0a0;"></canvas> -->

						<img src="./images/outputgel.png" id="output" class="image-fluid"> <!-- output-->
						<img src="./images/ladder.png" id="ladder" class="image-fluid" style="display: none;">
						<!-- ladder-->


					</div>
					<!-- </div> -->

				</div>
			</div>
		</div>
	</div>


	<div class="modal" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Viewing message</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<p>A desktop or laptop is the preferred choice for an enhanced viewing experience.</p>
					<p> When using a phone, it is recommended to enable the auto-rotate feature for an improved viewing
						experience.</p>
				</div>
				<div class="modal-footer">

					<button type="button" class="btn btn-warning" onclick="start()" data-bs-dismiss="modal">OK</button>
				</div>
			</div>
		</div>
	</div>


	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
	<script src="./js/main.js"></script>
	<script src="./js/jsplumb.js"></script>
	<script src="./js/volconnection.js"></script>

	<script>
		// Get a reference to the canvas element
		const canvas = document.getElementById('textvoltimer');

		// Check if the browser supports the canvas element
		if (canvas.getContext) {
			// Get the 2D drawing context
			const ctx = canvas.getContext('2d');

			// Set font properties
			ctx.font = 'bold 80px Arial'; // You can adjust the font weight, size and family

			// Set text properties
			ctx.fillStyle = 'black'; // Text color
			ctx.textAlign = 'center'; // Text alignment (centered horizontally)
			ctx.textBaseline = 'middle'; // Text baseline (centered vertically)

			// Define the text to be displayed
			const text = '';

			// Get the position to place the text (in this case, centered on the canvas)
			const x = canvas.width / 2;
			const y = canvas.height / 2;

			// Draw the text on the canvas
			ctx.fillText(text, x, y);
		} else {
			// Canvas not supported, provide a fallback or error message
			console.log('Canvas is not supported in this browser.');
		}




		/* Sideview text */
		const canvastxt = document.getElementById('sideviewcasetext');

		// Check if the browser supports the canvas element
		if (canvastxt.getContext) {
			// Get the 2D drawing context
			const ctxtxt = canvastxt.getContext('2d');

			// Set font properties
			ctxtxt.font = 'bold 60px Arial'; // You can adjust the font weight, size and family

			// Set text properties
			ctxtxt.fillStyle = 'black'; // Text color
			ctxtxt.textAlign = 'center'; // Text alignment (centered horizontally)
			ctxtxt.textBaseline = 'middle'; // Text baseline (centered vertically)

			// Define the text to be displayed
			const text = 'Side view';

			// Get the position to place the text (in this case, centered on the canvas)
			const x = canvastxt.width / 2;
			const y = canvastxt.height / 2;

			// Draw the text on the canvas
			ctxtxt.fillText(text, x, y);
		} else {
			// Canvas not supported, provide a fallback or error message
			console.log('Canvas is not supported in this browser.');
		}

		/* Sample A text */
		const canvastxta = document.getElementById('myCanvass1A');

		// Check if the browser supports the canvas element
		if (canvastxta.getContext) {
			// Get the 2D drawing context
			const ctxtxta = canvastxta.getContext('2d');

			// Set font properties
			ctxtxta.font = 'bold 120px Arial'; // You can adjust the font weight, size and family

			// Set text properties
			ctxtxta.fillStyle = 'black'; // Text color
			ctxtxta.textAlign = 'center'; // Text alignment (centered horizontally)
			ctxtxta.textBaseline = 'middle'; // Text baseline (centered vertically)

			// Define the text to be displayed
			const text = 'A';

			// Get the position to place the text (in this case, centered on the canvas)
			const x = canvastxta.width / 2;
			const y = canvastxta.height / 2;

			// Draw the text on the canvas
			ctxtxta.fillText(text, x, y);
		} else {
			// Canvas not supported, provide a fallback or error message
			console.log('Canvas is not supported in this browser.');
		}


		/* Sample B text */
		const canvastxtb = document.getElementById('myCanvass2B');

		// Check if the browser supports the canvas element
		if (canvastxtb.getContext) {
			// Get the 2D drawing context
			const ctxtxtb = canvastxtb.getContext('2d');

			// Set font properties
			ctxtxtb.font = 'bold 120px Arial'; // You can adjust the font weight, size and family

			// Set text properties
			ctxtxtb.fillStyle = 'black'; // Text color
			ctxtxtb.textAlign = 'center'; // Text alignment (centered horizontally)
			ctxtxtb.textBaseline = 'middle'; // Text baseline (centered vertically)

			// Define the text to be displayed
			const text = 'B';

			// Get the position to place the text (in this case, centered on the canvas)
			const x = canvastxtb.width / 2;
			const y = canvastxtb.height / 2;

			// Draw the text on the canvas
			ctxtxtb.fillText(text, x, y);
		} else {
			// Canvas not supported, provide a fallback or error message
			console.log('Canvas is not supported in this browser.');
		}

		/* Sample C text */
		const canvastxtc = document.getElementById('myCanvass3C');

		// Check if the browser supports the canvas element
		if (canvastxtc.getContext) {
			// Get the 2D drawing context
			const ctxtxtc = canvastxtc.getContext('2d');

			// Set font properties
			ctxtxtc.font = 'bold 120px Arial'; // You can adjust the font weight, size and family

			// Set text properties
			ctxtxtc.fillStyle = 'black'; // Text color
			ctxtxtc.textAlign = 'center'; // Text alignment (centered horizontally)
			ctxtxtc.textBaseline = 'middle'; // Text baseline (centered vertically)

			// Define the text to be displayed
			const text = 'C';

			// Get the position to place the text (in this case, centered on the canvas)
			const x = canvastxtc.width / 2;
			const y = canvastxtc.height / 2;

			// Draw the text on the canvas
			ctxtxtc.fillText(text, x, y);
		} else {
			// Canvas not supported, provide a fallback or error message
			console.log('Canvas is not supported in this browser.');
		}


		/* Sample D text */
		const canvastxtd = document.getElementById('myCanvass4D');

		// Check if the browser supports the canvas element
		if (canvastxtd.getContext) {
			// Get the 2D drawing context
			const ctxtxtd = canvastxtd.getContext('2d');

			// Set font properties
			ctxtxtd.font = 'bold 120px Arial'; // You can adjust the font weight, size and family

			// Set text properties
			ctxtxtd.fillStyle = 'black'; // Text color
			ctxtxtd.textAlign = 'center'; // Text alignment (centered horizontally)
			ctxtxtd.textBaseline = 'middle'; // Text baseline (centered vertically)

			// Define the text to be displayed
			const text = 'D';

			// Get the position to place the text (in this case, centered on the canvas)
			const x = canvastxtd.width / 2;
			const y = canvastxtd.height / 2;

			// Draw the text on the canvas
			ctxtxtd.fillText(text, x, y);
		} else {
			// Canvas not supported, provide a fallback or error message
			console.log('Canvas is not supported in this browser.');
		}

		/* buffer text */
		/* const canvasbtxt = document.getElementById('buffertext');

		// Check if the browser supports the canvas element
		if (canvasbtxt.getContext) {
			// Get the 2D drawing context
			const ctxbtxt = canvasbtxt.getContext('2d');

			// Set font properties
			ctxbtxt.font = 'bold 65px Arial'; // You can adjust the font weight, size and family

			// Set text properties
			ctxbtxt.fillStyle = 'black'; // Text color
			ctxbtxt.textAlign = 'center'; // Text alignment (centered horizontally)
			ctxbtxt.textBaseline = 'middle'; // Text baseline (centered vertically)

			// Define the text to be displayed
			const text = 'Buffer';

			// Get the position to place the text (in this case, centered on the canvas)
			const x = canvasbtxt.width / 2;
			const y = canvasbtxt.height / 2;

			// Draw the text on the canvas
			ctxbtxt.fillText(text, x, y);
		} else {
			// Canvas not supported, provide a fallback or error message
			console.log('Canvas is not supported in this browser.');
		} */

	</script>
</body>

</html>