<!DOCTYPE html>
<html>
<head>
  <title>Draggable Image with Color Change</title>
  <style>
    /* Define the initial styles for the image */
    #draggableImage {
      position: absolute;
      top: 100px;
      left: 100px;
      width: 150px;
      cursor: grab;
    }
  </style>
</head>
<body>
  <img id="draggableImage" src="./images/tubemeter.png" alt="Draggable Image">

  <script>
    const image = document.getElementById('draggableImage');
    let isDragging = false;

    // Function to handle mouse/touch down event
    function handleMouseDown(event) {
      isDragging = true;
      image.style.cursor = 'grabbing';

      // Calculate the offset of the mouse/touch position relative to the image
      const offsetX = event.clientX - image.getBoundingClientRect().left;
      const offsetY = event.clientY - image.getBoundingClientRect().top;

      // Function to handle mouse/touch move event
      function handleMouseMove(event) {
        if (isDragging) {
          // Update the position of the image based on mouse/touch position
          image.style.left = event.clientX - offsetX + '%';
          image.style.top = event.clientY - offsetY + '%';
        }
      }

      // Function to handle mouse/touch up event
      function handleMouseUp() {
        isDragging = false;
        image.style.cursor = 'grab';
        // Remove the event listeners when dragging is complete
        window.removeEventListener('mousemove', handleMouseMove);
        window.removeEventListener('mouseup', handleMouseUp);
        image.removeEventListener('touchmove', handleMouseMove);
        image.removeEventListener('touchend', handleMouseUp);
      }

      // Add event listeners for mouse/touch move and up events
      window.addEventListener('mousemove', handleMouseMove);
      window.addEventListener('mouseup', handleMouseUp);
      image.addEventListener('touchmove', handleMouseMove);
      image.addEventListener('touchend', handleMouseUp);
    }

    // Function to change the color when clicked/touched
    function changeColor() {
      image.style.filter = 'hue-rotate(90deg)'; // Change color to green (90 degrees in hue rotation)
    }

    // Add event listeners for mouse/touch down and click/touch events
    image.addEventListener('mousedown', handleMouseDown);
    image.addEventListener('touchstart', handleMouseDown);
    image.addEventListener('click', changeColor);
    image.addEventListener('touchend', changeColor);
  </script>
</body>
</html>
